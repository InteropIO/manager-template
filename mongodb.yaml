environments:
  staging:
---
repositories:
  - name: bitnami
    url: https://charts.bitnami.com/bitnami

releases:
  - name: mongodb
    namespace: glue42
    chart: bitnami/mongodb
    installed: true
    historyMax: 3
    values:
      - kind: Deployment
      - fullnameOverride: mongodb
      - serviceAccount:
          create: true
      - architecture: replicaset
      - useStatefulSet: true
      ## @param replicaCount Number of MongoDB(&reg;) nodes (only when `architecture=replicaset`)
      ## Ignored when mongodb.architecture=standalone
      - replicaCount: 2
      - auth:
          enabled: true
          rootUser: {{ requiredEnv "DB_USER" }} 
          rootPassword: {{ requiredEnv "DB_PASS" }}
      - persistence:
          enabled: true
          storageClass: "fsx-openzfs-retain"
          size: 1Gi ### DO NOT CHANGE !!!
      - nodeSelector:
          kubernetes.io/arch: "amd64"
          kubernetes.io/os: "linux"
      - arbiter:
          nodeSelector:
            kubernetes.io/arch: "amd64"
            kubernetes.io/os: "linux"